<!-- File: app/templates/assignments/course_detail.html -->
{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <!-- Breadcrumbs can be added here if needed -->
</div>

<div class="dashboard-grid">
    <!-- Left column for adding and listing assignments -->
    <div>
        <div class="card" style="margin-bottom: 1.5rem;">
            <h3>Add New Assignment</h3>
            <form action="/assignments/create/{{ course.id }}" method="post" class="form-grid">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" name="title" required placeholder="e.g., Problem Set 1">
                </div>
                <div class="form-group">
                    <label for="due_date">Due Date</label>
                    <input type="date" id="due_date" name="due_date" required>
                </div>
                <button type="submit" class="btn btn-primary">Add Assignment</button>
            </form>
        </div>

        <div class="card">
            <h3>All Assignments</h3>
            <ul class="item-list">
                {% for assignment in course.assignments | sort(attribute='due_date') %}
                <li class="assignment-item {% if assignment.is_completed %}completed{% endif %}">
                    <form action="/assignments/toggle/{{ assignment.id }}" method="post" class="toggle-form">
                        <input type="checkbox" onchange="this.form.submit()" {% if assignment.is_completed %}checked{% endif %}>
                    </form>
                    <div class="assignment-details">
                        <span class="title">{{ assignment.title }}</span>
                        <span class="due-date">Due: {{ assignment.due_date.strftime('%b %d') }}</span>
                    </div>
                </li>
                {% else %}
                <p>No assignments for this course yet.</p>
                {% endfor %}
            </ul>
        </div>
    </div>
    
    <!-- Right column for course info (Static Example) -->
    <div class="card">
        <h3>Course Information</h3>
        <p><strong>Code:</strong> {{ course.code }}</p>
        <p><strong>Instructor:</strong> {{ course.instructor or 'N/A' }}</p>
        <p><strong>Credits:</strong> {{ course.credits }}</p>
        <hr style="margin: 1rem 0; border: 0; border-top: 1px solid var(--border-color);">
        <h3>Recent Notes</h3>
        <p>Notes feature coming soon!</p>
    </div>
</div>
{% endblock %}